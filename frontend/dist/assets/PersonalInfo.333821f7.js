import{G as g,A as B}from"./AddressInfo.e193beb1.js";import{f as C}from"./fieldValidations.55b02bef.js";import{d as T,h as c,i as E,j as $,_ as A,r as n,o as d,c as m,b as s,w as i,a,F as k,l as N,t as p,k as D,g as K,e as V}from"./index.f324766f.js";import{f as R}from"./formatExpDate.459eb248.js";var _=(e=>(e.BANK_TYPE="BANK_TYPE",e.PIX_TYPE="PIX_TYPE",e))(_||{});const F={nickname:"",bankInfo:{bankName:"",agency:"",account:""},pixKey:"",type:_.BANK_TYPE},Y=T({setup(){const e=c(F),t=c([]);return{formData:e,fieldValidations:C,validation:c(null),tabTitles:["Dados Banc\xE1rios","Chave Pix"],tabValue:c(1),receiveInfoList:t,showForm:c(!0)}},mounted(){var e,t,r;(e=this.$store.state.user)!=null&&e.receiveInfo&&(this.formData=(t=this.$store.state.user)==null?void 0:t.receiveInfo,this.receiveInfoList=[this.formatReceiveItem((r=this.$store.state.user)==null?void 0:r.receiveInfo)],this.tabValue=this.formData.type===_.BANK_TYPE?1:2)},methods:{saveFormData(e){e&&(this.$store.commit(E.SET_FORM_RECEIVE_INFO,this.formData),this.$store.dispatch($.UPDATE_RECEIVE_INFO))},changeType(){this.tabValue===1?this.formData.type=_.BANK_TYPE:this.tabValue===2&&(this.formData.type=_.PIX_TYPE)},formatReceiveItem(e){var t,r,h;return e.type===_.BANK_TYPE?{nickname:e.nickname,description:`${(t=e.bankInfo)==null?void 0:t.bankName}/${(r=e.bankInfo)==null?void 0:r.agency}/${(h=e.bankInfo)==null?void 0:h.account}`}:{nickname:e.nickname,description:e.pixKey}},deleteReceiveItem(){this.$store.dispatch($.DELETE_RECEIVE_INFO),this.receiveInfoList=[],this.formData=F}},computed:{receiveInfo(){var e;return(e=this.$store.state.user)==null?void 0:e.receiveInfo}},watch:{receiveInfo(e){e&&(this.formData=e,this.receiveInfoList=[this.formatReceiveItem(e)],this.tabValue=this.formData.type===_.BANK_TYPE?1:2)}}}),U=a("div",{class:"mb-3 tw-font-bold"},"Dados de Recebimento",-1),L={class:"row"},O={class:"flex xs12"},M={key:0,class:"table-wrapper tw-overflow-y-auto"},q={class:"va-table va-table--striped va-table--hoverable"},S=a("thead",null,[a("tr",null,[a("th",null,"Apelido"),a("th",null,"Descri\xE7\xE3o"),a("th",null,"Deletar")])],-1),G=a("i",{class:"fa-solid fa-trash"},null,-1),X=a("div",{class:"mt-5 tw-font-bold"},"Adicionar Novo",-1),z={class:"row"},j={class:"flex xs12"},H={key:0,class:"row"},J={class:"flex xs12"},Q={class:"row"},W={class:"flex md4 sm6 xs12"},Z={class:"flex md4 sm6 xs12"},ee={class:"flex md4 sm6 xs12"},te={class:"flex md4 sm6 xs12"},ae=V(" Adicionar"),oe={key:1,class:"row"},se={class:"flex xs12"},ne={class:"row"},le={class:"flex md4 sm6 xs12"},ie={class:"flex md4 sm6 xs12"},re=V(" Salvar");function de(e,t,r,h,x,w){const f=n("va-button"),v=n("va-tab"),b=n("va-tabs"),u=n("va-input"),I=n("va-form"),l=n("va-card-content"),y=n("va-card");return d(),m("div",null,[s(y,null,{default:i(()=>[s(l,null,{default:i(()=>[U,a("div",L,[a("div",O,[e.receiveInfoList&&e.receiveInfoList.length>0?(d(),m("div",M,[a("table",q,[S,a("tbody",null,[(d(!0),m(k,null,N(e.receiveInfoList,(o,P)=>(d(),m("tr",{key:P},[a("td",null,p(o.nickname),1),a("td",null,p(o.description),1),a("td",null,[s(f,{onClick:t[0]||(t[0]=Re=>e.deleteReceiveItem()),class:"mr-2 mb-2",color:"danger",size:"small"},{default:i(()=>[G]),_:1})])]))),128))])])])):D("",!0)])]),X,a("div",z,[a("div",j,[s(b,{grow:"",modelValue:e.tabValue,"onUpdate:modelValue":t[2]||(t[2]=o=>e.tabValue=o),style:{width:"100%"}},{tabs:i(()=>[(d(!0),m(k,null,N(e.tabTitles.slice(0,3),o=>(d(),K(v,{onClick:t[1]||(t[1]=P=>e.changeType()),key:o},{default:i(()=>[V(p(o),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])])]),e.tabValue===1?(d(),m("div",H,[a("div",J,[s(I,{ref:"formBank",onValidation:t[8]||(t[8]=o=>e.validation=o)},{default:i(()=>[a("div",Q,[a("div",W,[s(u,{modelValue:e.formData.nickname,"onUpdate:modelValue":t[3]||(t[3]=o=>e.formData.nickname=o),type:"text",label:"Apelido",rules:e.fieldValidations.required},null,8,["modelValue","rules"])]),a("div",Z,[s(u,{modelValue:e.formData.bankInfo.bankName,"onUpdate:modelValue":t[4]||(t[4]=o=>e.formData.bankInfo.bankName=o),type:"text",label:"Banco",rules:e.fieldValidations.required},null,8,["modelValue","rules"])]),a("div",ee,[s(u,{modelValue:e.formData.bankInfo.agency,"onUpdate:modelValue":t[5]||(t[5]=o=>e.formData.bankInfo.agency=o),type:"text",label:"Ag\xEAncia",rules:e.fieldValidations.required},null,8,["modelValue","rules"])]),a("div",te,[s(u,{modelValue:e.formData.bankInfo.account,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formData.bankInfo.account=o),type:"text",label:"Conta",rules:e.fieldValidations.required},null,8,["modelValue","rules"])])]),s(f,{onClick:t[7]||(t[7]=o=>e.saveFormData(e.$refs.formBank.validate())),class:"mr-2 mb-2"},{default:i(()=>[ae]),_:1})]),_:1},512)])])):D("",!0),e.tabValue===2?(d(),m("div",oe,[a("div",se,[s(I,{ref:"formPix",onValidation:t[12]||(t[12]=o=>e.validation=o)},{default:i(()=>[a("div",ne,[a("div",le,[s(u,{modelValue:e.formData.nickname,"onUpdate:modelValue":t[9]||(t[9]=o=>e.formData.nickname=o),type:"text",label:"Apelido",rules:e.fieldValidations.required},null,8,["modelValue","rules"])]),a("div",ie,[s(u,{modelValue:e.formData.pixKey,"onUpdate:modelValue":t[10]||(t[10]=o=>e.formData.pixKey=o),type:"text",label:"Chave",rules:e.fieldValidations.required},null,8,["modelValue","rules"])])]),s(f,{onClick:t[11]||(t[11]=o=>e.saveFormData(e.$refs.formPix.validate())),class:"mr-2 mb-2"},{default:i(()=>[re]),_:1})]),_:1},512)])])):D("",!0)]),_:1})]),_:1})])}var me=A(Y,[["render",de]]);const ue=T({setup(){const e=c({cardNumber:"",cardName:"",expirationDate:""}),t=c([]);return{formData:e,fieldValidations:C,validation:c(null),cards:t}},mounted(){var e,t,r;(e=this.$store.state.user)!=null&&e.paymentInfo&&(this.cards=(r=(t=this.$store.state.user)==null?void 0:t.paymentInfo.cards)!=null?r:[])},methods:{saveFormData(e){if(e){const t={cards:[...this.cards,{...this.formData}]};this.$store.commit(E.SET_FORM_PAYMENT_INFO,t),this.$store.dispatch($.UPDATE_PAYMENT_INFO)}},deleteItem(e){this.cards=this.cards.filter(r=>r.cardNumber!==e);const t={cards:this.cards};this.cards.length===0?this.$store.dispatch($.DELETE_PAYMENT_INFO):(this.$store.commit(E.SET_FORM_PAYMENT_INFO,t),this.$store.dispatch($.UPDATE_PAYMENT_INFO))},onKeyup(e){var t;this.formData.expirationDate=(t=R(e,this.formData.expirationDate))!=null?t:""}},computed:{paymentInfo(){var e;return(e=this.$store.state.user)==null?void 0:e.paymentInfo}},watch:{paymentInfo(e){e&&(this.formData=e,this.cards=e.cards)}}}),fe=a("div",{class:"mb-3 tw-font-bold"},"Dados de Pagamento",-1),ce={class:"row"},ve={class:"flex xs12"},_e={key:0,class:"table-wrapper tw-overflow-y-auto"},pe={class:"va-table va-table--striped va-table--hoverable"},he=a("thead",null,[a("tr",null,[a("th",null,"Titular"),a("th",null,"N\xFAmero"),a("th",null,"Expira\xE7\xE3o"),a("th",null,"Deletar")])],-1),be=a("i",{class:"fa-solid fa-trash"},null,-1),$e=a("div",{class:"mt-5 tw-font-bold"},"Adicionar Novo Cart\xE3o",-1),Ie={class:"row"},De={class:"flex xs12"},Ve={class:"row"},ye={class:"flex md4 sm6 xs12"},Ee={class:"flex md4 sm6 xs12"},ke={class:"flex md4 sm6 xs12"},Ne=V(" Salvar");function Te(e,t,r,h,x,w){const f=n("va-button"),v=n("va-input"),b=n("va-form"),u=n("va-card-content"),I=n("va-card");return d(),m("div",null,[s(I,null,{default:i(()=>[s(u,null,{default:i(()=>[fe,a("div",ce,[a("div",ve,[e.cards&&e.cards.length>0?(d(),m("div",_e,[a("table",pe,[he,a("tbody",null,[(d(!0),m(k,null,N(e.cards,(l,y)=>(d(),m("tr",{key:y},[a("td",null,p(l.cardName),1),a("td",null,p(l.cardNumber),1),a("td",null,p(l.expirationDate),1),a("td",null,[s(f,{onClick:o=>e.deleteItem(l.cardNumber),class:"mr-2 mb-2",color:"danger",size:"small"},{default:i(()=>[be]),_:2},1032,["onClick"])])]))),128))])])])):D("",!0)])]),$e,a("div",Ie,[a("div",De,[s(b,{ref:"form",onValidation:t[4]||(t[4]=l=>e.validation=l)},{default:i(()=>[a("div",Ve,[a("div",ye,[s(v,{modelValue:e.formData.cardName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.formData.cardName=l),type:"text",label:"Nome do titular do cart\xE3o",rules:e.fieldValidations.required},null,8,["modelValue","rules"])]),a("div",Ee,[s(v,{modelValue:e.formData.cardNumber,"onUpdate:modelValue":t[1]||(t[1]=l=>e.formData.cardNumber=l),type:"text",label:"N\xFAmero do cart\xE3o",mask:"creditCard",rules:[e.fieldValidations.required,e.fieldValidations.number]},null,8,["modelValue","rules"])]),a("div",ke,[s(v,{modelValue:e.formData.expirationDate,"onUpdate:modelValue":t[2]||(t[2]=l=>e.formData.expirationDate=l),label:"Data de expira\xE7\xE3o",rules:[e.fieldValidations.required],maxLength:5,onKeydown:e.onKeyup},null,8,["modelValue","rules","onKeydown"])])]),s(f,{onClick:t[3]||(t[3]=l=>e.saveFormData(e.$refs.form.validate())),class:"mr-2 mb-2"},{default:i(()=>[Ne]),_:1})]),_:1},512)])])]),_:1})]),_:1})])}var Ae=A(ue,[["render",Te]]);const xe=T({components:{GeneralInfo:g,AddressInfo:B,ReceiveInfo:me,PaymentInfo:Ae}}),we={class:"form-elements"},Pe={class:"row"},Fe={class:"flex xs12"},Ce={class:"flex xs12"},ge={class:"flex xs12"},Be={class:"flex xs12"};function Ke(e,t,r,h,x,w){const f=n("GeneralInfo"),v=n("AddressInfo"),b=n("ReceiveInfo"),u=n("PaymentInfo");return d(),m("div",we,[a("div",Pe,[a("div",Fe,[s(f)]),a("div",Ce,[s(v)]),a("div",ge,[s(b)]),a("div",Be,[s(u)])])])}var Me=A(xe,[["render",Ke]]);export{Me as default};
